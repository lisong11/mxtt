{include file="layout/header"}
{include file="layout/navbar"}
<!--END NAVBAR-->
<style>
    .layui-upload-list img {
        height: 92px;
        width: 92px;
    }
</style>
<div class="boxed">
    <!--CONTENT CONTAINER-->
    <div id="content-container">
        <!--End breadcrumb-->
        <!--Page content-->
        <div id="page-content">
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel">
                        {include file="layout/bread"}
                        <!-- BASIC FORM ELEMENTS -->
                        <style type="text/css">
                            .layui-form-label {
                                width: 200px;
                            }

                            .layui-form-select {
                                width: 50% !important;
                            }

                            .layui-input-block {
                                margin-left: 210px;
                            }

                            .newinput {
                                width: 50%;
                            }

                            .layui-btn {
                                margin-left: 10px;
                            }

                            .sub-button {
                                margin-left: 300px;
                            }

                            .viewimg {
                                margin-left: 210px;
                                margin-bottom: 10px;
                                display: none;
                                width: 350px;
                                height: 200px;
                            }

                            .viewimg img {
                                width: 350px;
                                height: 200px;
                            }

                            .layui-upload-img {
                                width: 90px;
                                height: 90px;
                                margin: 0;
                            }

                            .pic-more {
                                width: 100%;
                                left;
                                margin: 10px 0px 0px 0px;
                            }

                            .pic-more li {
                                width: 120px;
                                height: 120px;
                                float: left;
                                margin-right: 5px;
                            }

                            .pic-more li .layui-input {
                                display: initial;
                            }

                            .pic-more li a {
                                position: absolute;
                                top: 0;
                                display: block;
                            }

                            .pic-more li a i {
                                font-size: 24px;
                                background-color: #008800;
                            }

                            .slide-pc-priview .item_img img {
                                width: 120px;
                                height: 120px;
                            }

                            .slide-pc-priview li {
                                position: relative;
                            }

                            .slide-pc-priview li .operate {
                                color: #000;
                                display: none;
                            }

                            .slide-pc-priview li .toleft {
                                cursor: pointer;
                                width: 20px;
                                height: 40px;
                                background: rgba(0, 0, 0, 0.5);
                                float: left;
                                font-size: 14px;
                                color: #f2f2f2;
                                text-align: center;
                                line-height: 40px;
                                position: absolute;
                                top: 40px;
                                z-index: 10;
                                font-weight: bold;
                            }

                            .slide-pc-priview li .toright {
                                cursor: pointer;
                                width: 20px;
                                height: 40px;
                                background: rgba(0, 0, 0, 0.5);
                                float: right;
                                font-size: 14px;
                                color: #f2f2f2;
                                text-align: center;
                                line-height: 40px;
                                position: absolute;
                                top: 40px;
                                right: 0px;
                                z-index: 10;
                                font-weight: bold;
                            }

                            .slide-pc-priview li .close {
                                position: absolute;
                                top: 5px;
                                right: 5px;
                                cursor: pointer;
                            }

                            .slide-pc-priview li:hover .operate {
                                display: block;
                            }
                        </style>
                        <style>
                            .video-more {
                                width: 100%;
                                left;
                                margin: 10px 0px 0px 0px;
                            }

                            .video-more li {
                                width: 240px;
                                height: 150px;
                                float: left;
                                margin-right: 5px;
                            }

                            .video-more li .layui-input {
                                display: initial;
                            }

                            .video-more li a {
                                position: absolute;
                                top: 0;
                                display: block;
                            }

                            .video-more li a i {
                                font-size: 24px;
                                background-color: #008800;
                            }

                            .slide-pc-privideo .item_img img {
                                width: 120px;
                                height: 120px;
                            }

                            .slide-pc-privideo li {
                                position: relative;
                            }

                            .slide-pc-privideo li .operate {
                                color: #000;
                                display: none;
                            }

                            .slide-pc-privideo li .toleft {
                                cursor: pointer;
                                width: 20px;
                                height: 40px;
                                background: rgba(0, 0, 0, 0.5);
                                float: left;
                                font-size: 14px;
                                color: #f2f2f2;
                                text-align: center;
                                line-height: 40px;
                                position: absolute;
                                top: 50px;
                                z-index: 10;
                                font-weight: bold;
                                /*margin-left:-20px;*/
                            }

                            .slide-pc-privideo li .toright {
                                cursor: pointer;
                                width: 20px;
                                height: 40px;
                                background: rgba(0, 0, 0, 0.5);
                                float: right;
                                font-size: 14px;
                                color: #f2f2f2;
                                text-align: center;
                                line-height: 40px;
                                position: absolute;
                                top: 50px;
                                right: 0px;
                                z-index: 10;
                                font-weight: bold;
                                /*margin-left:-20px;*/
                            }

                            .slide-pc-privideo li .close {
                                position: absolute;
                                top: 5px;
                                right: 5px;
                                cursor: pointer;
                            }

                            .slide-pc-privideo li:hover .operate {
                                display: block;
                            }
                        </style>
                        <form method="post" action="addDo" id="add_form" class="layui-form"
                              enctype="multipart/form-data">
                            <div class="layui-form-item">
                                <label class="layui-form-label">课程名称：</label>
                                <div class="layui-input-block">
                                    <input type="text" name="title" placeholder="请输入课程名称" autocomplete="off"
                                           class="layui-input newinput" lay-verify="title">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">课程内容：</label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入课程内容" style="width: 50%;" name="detail"
                                              class="layui-textarea" lay-verify="detail"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item" style="border-bottom: 1px solid #eee;">
                                <label class="layui-form-label" style="font-size: 16px;font-weight: bold">教案</label>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button type="button" class="layui-btn addimg" id="addimg" style="margin-left:0px">
                                        添加图片目录
                                    </button>
                                    <button type="button" class="layui-btn addvideo" id="addvideo"
                                            style="margin-left:0px">
                                        添加视频目录
                                    </button>
                                </div>


                            </div>
                            <div id="imgcontent"></div>
                            <!--<div class="layui-form-item">-->
                            <!--<div class="layui-input-block">-->
                            <!--<button type="button" class="layui-btn" id="imgs" style="margin-left:0px">多图片上传-->
                            <!--</button>-->
                            <!--<blockquote class="layui-elem-quote layui-quote-nm"-->
                            <!--style="margin-top: 10px;height: 180px;">-->
                            <!--预览图(顺序显示最高级从左到右)：-->
                            <!--<div class="layui-upload-list pic-more" id="show_img">-->
                            <!--<ul class="pic-more-upload-list slide-pc-priview" id="priview">-->
                            <!--<li class="item_img">-->
                            <!--<div class="operate"><i class="toleft layui-icon"><</i><i-->
                            <!--class="toright layui-icon">></i><i class="close layui-icon"><img-->
                            <!--style="height: 20px;width: 20px;"-->
                            <!--src="/static/admin/img/del.jpg"></i></div>-->
                            <!--<img src="http://www.adm.com/uploads/images/201912/7651575618614.jpg"-->
                            <!--class="img"><input type="hidden" name="pc_src[]"-->
                            <!--value="1">-->
                            <!--</li>-->
                            <!--<li class="item_img">-->
                            <!--<div class="operate"><i class="toleft layui-icon"><</i><i-->
                            <!--class="toright layui-icon">></i><i class="close layui-icon"><img-->
                            <!--style="height: 20px;width: 20px;"-->
                            <!--src="/static/admin/img/del.jpg"></i></div>-->
                            <!--<img src="http://39.98.43.82/uploads/images/201912/1531575625635.jpg"-->
                            <!--class="img"><input type="hidden" name="pc_src[]"-->
                            <!--value="1">-->
                            <!--</li>-->
                            <!--</ul>-->
                            <!--</div>-->
                            <!--</blockquote>-->
                            <!--</div>-->

                            <div id="videocontent"></div>
                            <!--</div>-->
                            <!--<div class="layui-form-item">-->
                            <!--<div class="layui-input-block">-->
                            <!--<button type="button" class="layui-btn" id="video" style="margin-left:0px">视频上传-->
                            <!--</button>-->
                            <!--<blockquote class="layui-elem-quote layui-quote-nm"-->
                            <!--style="margin-top: 10px;height: 230px;">-->
                            <!--预览(上传速度和网速和文件大小有关,若文件较大，请耐心等待)：-->
                            <!--<div class="layui-upload-list video-more" id="show_video">-->
                            <!--<ul class="pic-more-upload-list slide-pc-privideo" id="privideo">-->
                            <!--<li class="item_img" style="margin-top: 20px">-->
                            <!--<div class="operate"><i class="toleft layui-icon"><</i><i-->
                            <!--class="toright layui-icon">></i><i class="close layui-icon"-->
                            <!--style="margin-top: -25px"><img-->
                            <!--style="height: 20px;width: 30px;"-->
                            <!--src="/static/admin/img/del.jpg"></i></div>-->
                            <!--<video style="width: 200px;height: 150px;margin-left: 20px"-->
                            <!--controls="controls" type="video/mp4" preload="auto">-->
                            <!--<source autostart="false"-->
                            <!--src="http://www.adm.com/uploads/videos/201912/8261575621113.mp4"-->
                            <!--alt="1.video" class="layui-upload-img">-->
                            <!--</video>-->

                            <!--</li>-->

                            <!--</ul>-->
                            <!--</div>-->
                            <!--</blockquote>-->

                            <!--</div>-->

                            <!--</div>-->
                            <div class="layui-form-item" style="border-bottom: 1px solid #eee;">
                                <label class="layui-form-label" style="font-size: 16px;font-weight: bold">添加课时作业</label>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">课前预习</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="hw_title" placeholder="课时作业1" autocomplete="off"
                                               class="layui-input newinput" lay-verify="hw_title">
                                    </div>
                                </div>
                                <div class="layui-input-block">
                                    <button type="button" class="layui-btn" id="h_imgs" style="margin-left:0px">图片上传
                                    </button>
                                    <blockquote class="layui-elem-quote layui-quote-nm"
                                                style="margin-top: 10px;height: 180px;">
                                        预览图：
                                        <div class="layui-upload-list pic-more" id="h_show">
                                            <ul class="pic-more-upload-list slide-pc-priview" class="slide-pc-priview"
                                                id="h_priview">

                                            </ul>
                                        </div>
                                    </blockquote>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">课后作业</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="hw_title1" placeholder="课时作业2" autocomplete="off"
                                               class="layui-input newinput" lay-verify="hw_title1">
                                    </div>
                                </div>
                                <div class="layui-input-block">
                                    <button type="button" class="layui-btn" id="h_imgs1" style="margin-left:0px">图片上传
                                    </button>
                                    <blockquote class="layui-elem-quote layui-quote-nm"
                                                style="margin-top: 10px;height: 180px;">
                                        预览图：
                                        <div class="layui-upload-list pic-more" id="h_show1">
                                            <ul class="pic-more-upload-list slide-pc-priview" class="slide-pc-priview"
                                                id="h_priview1">

                                            </ul>
                                        </div>
                                    </blockquote>
                                </div>

                            </div>

                            <div class="layui-form-item">
                                <div class="layui-input-block sub-button">
                                    <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                </div>
                            </div>
                            <div class="layui-layer-shade"
                                 style="z-index: 19891014; background-color: rgb(0, 0, 0); opacity: 0.3;display:none;"></div>
                            <div class="layui-layer layui-layer-page"
                                 style="z-index: 19891015; top: 120px;width:50%;left:25%;display:none;">
                                <div class="layui-progress layui-progress-big" lay-showpercent="yes"
                                     style="border-radius:0px;">
                                    <div class="layui-progress-bar layui-bg-red" style="border-radius:0px;"
                                         lay-percent=""></div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
        <!--End page content-->
    </div>
    <!--END CONTENT CONTAINER-->
    <!--ASIDE-->
    <!--END ASIDE-->
    <!--MAIN NAVIGATION-->
    {include file="layout/menu"}
    <!--END MAIN NAVIGATION-->
</div>
<!-- FOOTER -->
{include file="layout/footer"}
<!-- END FOOTER -->
<!-- SCROLL PAGE BUTTON -->
<button class="scroll-top btn">
    <i class="pci-chevron chevron-up"></i>
</button>
</div>
<!-- END OF CONTAINER -->
</body>
</html>
<script>

    //添加图片
    $("body").on("click", ".addimg", function () {
        $.ajax({
            url: 'ajaxGetImg',
            type: 'post',
            data: {data: 1},
            dataType: 'json',
            async: false,
            success: function (result) {
                $('#imgcontent').append('<div class="layui-form-item"><div class="layui-input-block"><button type="button" class="layui-btn" id="' + result.data + '" style="margin-left:0px">多图片上传</button><blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;height: 180px;">预览图(顺序显示最高级从左到右)：<div class="layui-upload-list pic-more" ><ul class="pic-more-upload-list slide-pc-priview" id="' + result.ul + '"></ul></div></blockquote></div> </div>');
                var uploadUrl = "{:url('Common/uploadFile')}";
                var elem = '#';
                elem += result.data;
                var append = '#';
                append += result.ul;
                var courseimgs = result.img;
                courseimgs += '[]';
                layui.use('upload', function () {
                    var upload = layui.upload;
                    //多图片上传
                    upload.render({
                        elem: elem
                        , url: uploadUrl
                        , multiple: true
                        , data: {type: '1'}
                        , size: 1024
                        , progress: function (e, percent) {
                            var percent = percent;
                            //将百分比显示到进度条
                            $('.layui-layer-shade').show();
                            $('.layui-layer-page').show();
                            $('.layui-bg-red').attr('lay-percent', percent + '%');
                            $('.layui-bg-red').width(percent + '%');
                            $('.layui-progress-text').text(percent + '%');
                        }
                        , choose: function (obj) {
                            obj.preview(function (index, file, result) {
                                $("#fileName").html(file.name);
                            });
                        }
                        , before: function (obj) {
                            //预读本地文件示例，不支持ie8
                            obj.preview(function (index, file, result) {
                            });
                        }
                        , done: function (res) {

                            if (res.code == 200) {
                                $('.layui-layer-shade').hide();
                                $('.layui-layer-page').hide();
                                $(append).append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + res.url + '" class="img"><input type="hidden" name="' + courseimgs + '" value="' + res.url + '"> </li>');

                            }
                        }
                    });

                });
            }
        });

    });
    //添加视频
    $("body").on("click", ".addvideo", function () {
        $.ajax({
            url: 'ajaxGetVideo',
            type: 'post',
            data: {data: 1},
            dataType: 'json',
            async: false,
            success: function (result) {
                var htm = '<div class="layui-form-item">';
                htm += '<div class="layui-input-block">';
                htm += '<button type="button" class="layui-btn" id="' + result.data + '" style="margin-left:0px" >视频上传</button>';
                htm += '<blockquote class="layui-elem-quote layui-quote-nm"\n' +
                    '                style="margin-top: 10px;height: 230px;">';
                htm += '预览(上传速度和网速和文件大小有关,若文件较大，请耐心等待)：';
                htm += '<div class="layui-upload-list video-more" id="show_video">';
                htm += '<ul class="pic-more-upload-list slide-pc-privideo" id="' + result.ul + '">';
                htm += '</ul></div></blockquote></div>';
                htm += '</div>';
                $('#videocontent').append(htm);
                var videoUrl = "{:url('Course/videoUpload')}";
                var elev = '#';
                elev += result.data;
                var appendv = '#';
                appendv += result.ul;
                var coursevideos = result.video;
                coursevideos += '[]';
                layui.use('upload', function () {
                    var upload = layui.upload;
                    upload.render({
                        elem: elev
                        , url: videoUrl
                        , multiple: true
                        , accept: 'video'
                        , exts: 'mp4'
                        , data: {type: '2'}
                        , before: function (obj) {
                            $('.layui-layer-shade').show();
                            $('.layui-layer-page').show();
                            $('.layui-bg-red').attr('lay-percent', 50 + '%');
                            $('.layui-bg-red').width(50 + '%');
                            $('.layui-progress-text').text();

                        }
                        , done: function (res) {
                            if (res.code == 200) {
                                $('.layui-layer-shade').hide();
                                $('.layui-layer-page').hide();

                                $(appendv).append('<li class="item_img" style="margin-top: 20px"><div class="operate"><i class="close layui-icon" style="margin-top: -25px"><img style="height: 20px;width: 30px;" src="/static/admin/img/del.jpg"></i></div><video style="width: 200px;height: 150px;margin-left: 20px" controls="controls" type="video/mp4" preload="auto"> <source autostart="false" src="' + res.url + '" class="layui-upload-img"></video><input type="hidden" name="' + coursevideos + '" value="' + res.url + '"> </li>');

                            }

                        }
                    });

                });
            }
        });

    });

    //多图上传点击<>左右移动图片
    $("body").on("click", ".pic-more ul li .toleft", function () {
        var li_index = $(this).closest("li").index();
        if (li_index >= 1) {
            $(this).closest("li").insertBefore($(this).closest("ul").find("li").eq(Number(li_index) - 1));
        }
    });
    $("body").on("click", ".pic-more ul li .toright", function () {
        var li_index = $(this).closest("li").index();
        $(this).closest("li").insertAfter($(this).closest("ul").find("li").eq(Number(li_index) + 1));
    });
    $("body").on("click", ".video-more ul li .toleft", function () {
        var li_index = $(this).closest("li").index();
        if (li_index >= 1) {
            $(this).closest("li").insertBefore($(this).closest("ul").find("li").eq(Number(li_index) - 1));
        }
    });
    $("body").on("click", ".video-more ul li .toright", function () {
        var li_index = $(this).closest("li").index();
        $(this).closest("li").insertAfter($(this).closest("ul").find("li").eq(Number(li_index) + 1));
    });
    //点击多图上传的X,删除当前的图片
    $("body").on("click", ".close", function () {
        $(this).closest("li").remove();
    });

    layui.use(['form', 'laydate', 'upload', 'layedit'], function () {
        var form = layui.form;
        var uploadUrl = "{:url('Common/uploadFile')}";
        var videoUrl = "{:url('Course/videoUpload')}";
        layui.use('upload', function () {
            var upload = layui.upload;

            //多图片上传
            upload.render({
                elem: '#imgs'
                , url: uploadUrl
                , multiple: true
                , data: {type: '1'}
                , size: 1024
                , progress: function (e, percent) {
                    var percent = percent;
                    //将百分比显示到进度条
                    $('.layui-layer-shade').show();
                    $('.layui-layer-page').show();
                    $('.layui-bg-red').attr('lay-percent', percent + '%');
                    $('.layui-bg-red').width(percent + '%');
                    $('.layui-progress-text').text(percent + '%');
                }
                , choose: function (obj) {
                    obj.preview(function (index, file, result) {
                        $("#fileName").html(file.name);
                    });
                }
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {

                        // $('#show_img').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img" style="margin-left: 10px">');
                        //$('#slide-pc-priview').append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + result + '" class="img"><input type="hidden" name="pc_src[]" value="1"> </li>');
                    });
                }
                , done: function (res) {

                    if (res.code == 200) {
                        $('.layui-layer-shade').hide();
                        $('.layui-layer-page').hide();
                        $('#priview').append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + res.url + '" class="img"><input type="hidden" name="course_imgs[]" value="' + res.url + '"> </li>');

                    }


                    // $('.layui-bg-red').attr('lay-percent', '0%');
                    // $('.layui-bg-red').width('0%');
                    // $('.layui-progress-text').text('0%');
                    //  layer.msg('上传成功');
                    //$("#course_imgs").append('<input type="hidden" name="course_imgs[]" value="' + res.url + '">');
                    //上传完毕
                }
            });
            upload.render({
                elem: '#h_imgs'
                , url: uploadUrl
                , multiple: true
                , data: {type: '1'}
                , size: 1024
                , progress: function (e, percent) {
                    var percent = percent;
                    //将百分比显示到进度条
                    $('.layui-layer-shade').show();
                    $('.layui-layer-page').show();
                    $('.layui-bg-red').attr('lay-percent', percent + '%');
                    $('.layui-bg-red').width(percent + '%');
                    $('.layui-progress-text').text(percent + '%');
                }
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        //$('#show_img1').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img" style="margin-left: 10px">');
                    });
                }
                , done: function (res) {
                    if (res.code == 200) {
                        $('.layui-layer-shade').hide();
                        $('.layui-layer-page').hide();
                        $('#h_priview').append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + res.url + '" class="img"><input type="hidden" name="h_imgs[]" value="' + res.url + '"> </li>');

                    }
                    //上传完毕
                }
            });
            upload.render({
                elem: '#h_imgs1'
                , url: uploadUrl
                , multiple: true
                , data: {type: '1'}
                , size: 1024
                , progress: function (e, percent) {
                    //将百分比显示到进度条
                    $('.layui-layer-shade').show();
                    $('.layui-layer-page').show();
                    $('.layui-bg-red').attr('lay-percent', percent + '%');
                    $('.layui-bg-red').width(percent + '%');
                    $('.layui-progress-text').text(percent + '%');
                }
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        //$('#show_img2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img" style="margin-left: 10px">');
                    });
                }
                , done: function (res) {
                    if (res.code == 200) {
                        $('.layui-layer-shade').hide();
                        $('.layui-layer-page').hide();
                        $('#h_priview1').append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + res.url + '" class="img"><input type="hidden" name="h_imgs1[]" value="' + res.url + '"> </li>');

                    }
                }
            });
            upload.render({
                elem: '#imgs5'
                , url: uploadUrl
                , multiple: true
                , data: {type: '1'}
                , size: 1024
                , progress: function (e, percent) {
                    //将百分比显示到进度条
                    $('.layui-layer-shade').show();
                    $('.layui-layer-page').show();
                    $('.layui-bg-red').attr('lay-percent', percent + '%');
                    $('.layui-bg-red').width(percent + '%');
                    $('.layui-progress-text').text(percent + '%');
                }
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        //$('#show_img2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img" style="margin-left: 10px">');
                    });
                }
                , done: function (res) {
                    if (res.code == 200) {
                        $('.layui-layer-shade').hide();
                        $('.layui-layer-page').hide();
                        $('#priview5').append('<li class="item_img"> <div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon"><img style="height: 20px;width: 20px;" src="/static/admin/img/del.jpg"></i></div> <img src="' + res.url + '" class="img"><input type="hidden" name="course_imgs2[]" value="' + res.url + '"> </li>');

                    }
                }
            });
            //多视频上传
            upload.render({
                elem: '#video'
                , url: videoUrl
                , multiple: true
                , accept: 'video'
                , exts: 'mp4'
                , data: {type: '2'}
                , before: function (obj) {
                    $('.layui-layer-shade').show();
                    $('.layui-layer-page').show();
                    $('.layui-bg-red').attr('lay-percent', 50 + '%');
                    $('.layui-bg-red').width(50 + '%');
                    $('.layui-progress-text').text();
                    //预读本地文件示例，不支持ie8
                    // obj.preview(function (index, file, result) {
                    //     $('#show_video').append(' <video style="width: 200px;height: 150px;" controls="controls" type="video/mp4" preload="auto"> <source autostart="false" src="' + result + '" alt="' + file.name + '" class="layui-upload-img"</video>')
                    // });
                }
                , done: function (res) {
                    if (res.code == 200) {
                        $('.layui-layer-shade').hide();
                        $('.layui-layer-page').hide();
                        $('#privideo').append('<li class="item_img" style="margin-top: 20px"><div class="operate"><i class="toleft layui-icon"><</i><i class="toright layui-icon">></i><i class="close layui-icon" style="margin-top: -25px"><img style="height: 20px;width: 30px;" src="/static/admin/img/del.jpg"></i></div><video style="width: 200px;height: 150px;margin-left: 20px" controls="controls" type="video/mp4" preload="auto"> <source autostart="false" src="' + res.url + '" class="layui-upload-img"></video><input type="hidden" name="videos[]" value="' + res.url + '"> </li>');

                    }

                    // $('.layui-bg-red').attr('lay-percent', '0%');
                    // $('.layui-bg-red').width('0%');
                    // $('.layui-progress-text').text('0%');
                    // layer.msg('上传成功');
                    //上传完毕
                }
            });
        });


        form.verify({
            title: function (value, item) {
                if (value == '') {
                    return '课程名称不能为空';
                }
            },
            detail: function (value, item) {
                if (value == '') {
                    return '课程内容不能为空';
                }
            },
            hw_title: function (value, item) {
                if (value == '') {
                    return '课前预习不能为空';
                }
            },
            hw_title1: function (value, item) {
                if (value == '') {
                    return '课后作业不能为空';
                }
            }
        });
    })
</script>


<script src="/static/admin/plugins/ckeditor/ckeditor.js"></script>

